<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>dnsprotocol</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  toggleSwitch.addEventListener('change', switchTheme, false);

  const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark') {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">dnsprotocol</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li><a class="reference" id="current-support_toc" href="#current-support">Current Support</a></li>
<li><a class="reference" id="basic-use_toc" href="#basic-use">Basic Use</a></li>
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">initQuestion
      <li><a class="reference" href="#initQuestion%2Cstring%2CQType%2CQClass"
    title="initQuestion(qname: string; qtype: QType; qclass: QClass = QClass.IN): Question">initQuestion,<wbr>string,<wbr>QType,<wbr>QClass</a></li>

  </ul>
  <ul class="simple nested-toc-section">parseMessage
      <li><a class="reference" href="#parseMessage%2CBinMsg"
    title="parseMessage(bmsg: BinMsg): Message">parseMessage,<wbr>BinMsg</a></li>

  </ul>
  <ul class="simple nested-toc-section">initHeader
      <li><a class="reference" href="#initHeader%2Cuint16%2CQR%2COpCode%2Cbool%2Cbool%2Cbool%2Cbool%2CRCode%2Cuint16%2Cuint16%2Cuint16%2Cuint16"
    title="initHeader(id: uint16 = 0&apos;u16; qr: QR = QR.Query; opcode: OpCode = OpCode.Query;
           aa: bool = false; tc: bool = false; rd: bool = false;
           ra: bool = false; rcode: RCode = RCode.NoError;
           qdcount: uint16 = 0&apos;u16; ancount: uint16 = 0&apos;u16;
           nscount: uint16 = 0&apos;u16; arcount: uint16 = 0&apos;u16): Header">initHeader,<wbr>uint16,<wbr>QR,<wbr>OpCode,<wbr>bool,<wbr>bool,<wbr>bool,<wbr>bool,<wbr>RCode,<wbr>uint16,<wbr>uint16,<wbr>uint16,<wbr>uint16</a></li>

  </ul>
  <ul class="simple nested-toc-section">initResourceRecord
      <li><a class="reference" href="#initResourceRecord%2Cstring%2CType%2CClass%2Cint32%2Cuint16%2CRDatas"
    title="initResourceRecord(name: string; type: Type; class: Class; ttl: int32;
                   rdlength: uint16; rdata: RDatas): ResourceRecord">initResourceRecord,<wbr>string,<wbr>Type,<wbr>Class,<wbr>int32,<wbr>uint16,<wbr>RDatas</a></li>

  </ul>
  <ul class="simple nested-toc-section">toBinMsg
      <li><a class="reference" href="#toBinMsg%2CHeader%2CStringStream"
    title="toBinMsg(header: Header; ss: StringStream)">toBinMsg,<wbr>Header,<wbr>StringStream</a></li>
  <li><a class="reference" href="#toBinMsg%2CQuestion%2CStringStream%2CTable%5Bstring%2Cuint16%5D"
    title="toBinMsg(question: Question; ss: StringStream;
         dictionary: var Table[string, uint16])">toBinMsg,<wbr>Question,<wbr>StringStream,<wbr>Table[string,<wbr>uint16]</a></li>
  <li><a class="reference" href="#toBinMsg%2CResourceRecord%2CStringStream%2CTable%5Bstring%2Cuint16%5D"
    title="toBinMsg(rr: ResourceRecord; ss: StringStream;
         dictionary: var Table[string, uint16])">toBinMsg,<wbr>ResourceRecord,<wbr>StringStream,<wbr>Table[string,<wbr>uint16]</a></li>
  <li><a class="reference" href="#toBinMsg%2CMessage%2Cbool"
    title="toBinMsg(msg: Message; isTcp: bool = false): BinMsg">toBinMsg,<wbr>Message,<wbr>bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">initMessage
      <li><a class="reference" href="#initMessage%2CHeader%2CQuestions%2CAnswers%2CAuthorities%2CAdditionals"
    title="initMessage(header: Header; questions: Questions = @[]; answers: Answers = @[];
            authorities: Authorities = @[]; additionals: Additionals = @[]): Message">initMessage,<wbr>Header,<wbr>Questions,<wbr>Answers,<wbr>Authorities,<wbr>Additionals</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#19" id="69">Exports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>

</ul>

  </div>
  &nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L1"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L1" class="link-seesrc" target="_blank" >Edit</a>

  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><p>Domain Name System (DNS) protocol for Nim programming language</p>
<p>The current implementation was based on RFCs <a class="reference external" href="https://tools.ietf.org/html/rfc1035">1034</a> and <a class="reference external" href="https://tools.ietf.org/html/rfc1035">1035</a>. There is still much to be done...</p>
<p>This package does not transport data, that is, it is neither a DNS client nor a DNS server, but it can be used to implement them. If you need a client dns use <a class="reference external" href="https://github.com/rockcavera/nim-ndns">ndns</a>.</p>

<h1><a class="toc-backref" id="current-support" href="#current-support">Current Support</a></h1><p>Most types of the IN class are currently supported. However, if I need to add a type, I would be happy to receive a PR and a little less with an issue.</p>
<p>For dns types, classes, rcodes, etc. that are supported, access <a class="reference external" href="dnsprotocol/types.html">here</a>. Unsupported types are stored in <tt class="docutils literal"><span class="pre">RDataUnknown</span></tt>, thus avoiding runtime errors.</p>

<h1><a class="toc-backref" id="basic-use" href="#basic-use">Basic Use</a></h1><p>Creating a <tt class="docutils literal"><span class="pre">Message</span></tt> object with a <tt class="docutils literal"><span class="pre">QType.A</span></tt> query for the domain name nim-lang.org:</p>
<p><pre class="listing"><span class="Keyword">import</span> <span class="Identifier">dnsprotocol</span>

<span class="Keyword">let</span> <span class="Identifier">header</span> <span class="Operator">=</span> <span class="Identifier">initHeader</span><span class="Punctuation">(</span><span class="Identifier">id</span> <span class="Operator">=</span> <span class="DecNumber">12345'</span><span class="Identifier">u16</span><span class="Punctuation">,</span> <span class="Identifier">rd</span> <span class="Operator">=</span> <span class="Identifier">true</span><span class="Punctuation">)</span>

<span class="Keyword">let</span> <span class="Identifier">question</span> <span class="Operator">=</span> <span class="Identifier">initQuestion</span><span class="Punctuation">(</span><span class="StringLit">&quot;nim-lang.org&quot;</span><span class="Punctuation">,</span> <span class="Identifier">QType</span><span class="Operator">.</span><span class="Identifier">A</span><span class="Punctuation">,</span> <span class="Identifier">QClass</span><span class="Operator">.</span><span class="Keyword">IN</span><span class="Punctuation">)</span>
  <span class="Comment"># If the last character of &quot;nim-lang.org&quot; is not a '.', the initializer will</span>
  <span class="Comment"># add, as it is called the DNS root.</span>

<span class="Keyword">let</span> <span class="Identifier">msg</span> <span class="Operator">=</span> <span class="Identifier">initMessage</span><span class="Punctuation">(</span><span class="Identifier">header</span><span class="Punctuation">,</span> <span class="Operator">@</span><span class="Punctuation">[</span><span class="Identifier">question</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
  <span class="Comment"># The initializer automatically changes `header.qdcount` to `1'u16`</span>

<span class="Identifier">echo</span> <span class="Identifier">msg</span>

<span class="Keyword">let</span> <span class="Identifier">bmsg</span> <span class="Operator">=</span> <span class="Identifier">toBinMsg</span><span class="Punctuation">(</span><span class="Identifier">msg</span><span class="Punctuation">)</span>

<span class="Identifier">echo</span> <span class="StringLit">&quot;</span><span class="EscapeSequence">\n</span><span class="StringLit">&quot;</span><span class="Punctuation">,</span> <span class="Identifier">bmsg</span>
</pre></p>
<p>Creating a <tt class="docutils literal"><span class="pre">Message</span></tt> object with the query response from the previous example:</p>
<p><pre class="listing"><span class="Keyword">import</span> <span class="Identifier">dnsprotocol</span>

<span class="Keyword">let</span> <span class="Identifier">header</span> <span class="Operator">=</span> <span class="Identifier">initHeader</span><span class="Punctuation">(</span><span class="Identifier">id</span> <span class="Operator">=</span> <span class="DecNumber">12345'</span><span class="Identifier">u16</span><span class="Punctuation">,</span> <span class="Identifier">qr</span> <span class="Operator">=</span> <span class="Identifier">QR</span><span class="Operator">.</span><span class="Identifier">Response</span><span class="Punctuation">,</span> <span class="Identifier">rd</span> <span class="Operator">=</span> <span class="Identifier">true</span><span class="Punctuation">,</span> <span class="Identifier">ra</span> <span class="Operator">=</span> <span class="Identifier">true</span><span class="Punctuation">)</span>

<span class="Keyword">let</span> <span class="Identifier">question</span> <span class="Operator">=</span> <span class="Identifier">initQuestion</span><span class="Punctuation">(</span><span class="StringLit">&quot;nim-lang.org.&quot;</span><span class="Punctuation">,</span> <span class="Identifier">QType</span><span class="Operator">.</span><span class="Identifier">A</span><span class="Punctuation">,</span> <span class="Identifier">QClass</span><span class="Operator">.</span><span class="Keyword">IN</span><span class="Punctuation">)</span>

<span class="Keyword">let</span> <span class="Identifier">rr1</span> <span class="Operator">=</span> <span class="Identifier">initResourceRecord</span><span class="Punctuation">(</span><span class="StringLit">&quot;nim-lang.org&quot;</span><span class="Punctuation">,</span> <span class="Keyword">Type</span><span class="Operator">.</span><span class="Identifier">A</span><span class="Punctuation">,</span> <span class="Identifier">Class</span><span class="Operator">.</span><span class="Keyword">IN</span><span class="Punctuation">,</span> <span class="DecNumber">299'i32</span><span class="Punctuation">,</span> <span class="DecNumber">4'</span><span class="Identifier">u16</span><span class="Punctuation">,</span>
                             <span class="Identifier">RDataA</span><span class="Punctuation">(</span><span class="Identifier">address</span><span class="Punctuation">:</span> <span class="Punctuation">[</span><span class="DecNumber">172'</span><span class="Identifier">u8</span><span class="Punctuation">,</span> <span class="DecNumber">67</span><span class="Punctuation">,</span> <span class="DecNumber">132</span><span class="Punctuation">,</span> <span class="DecNumber">242</span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">)</span>
  <span class="Comment"># If the last character of &quot;nim-lang.org&quot; is not a '.', the initializer will</span>
  <span class="Comment"># add, as it is called the DNS root.</span>

<span class="Keyword">let</span> <span class="Identifier">rr2</span> <span class="Operator">=</span> <span class="Identifier">initResourceRecord</span><span class="Punctuation">(</span><span class="StringLit">&quot;nim-lang.org.&quot;</span><span class="Punctuation">,</span> <span class="Keyword">Type</span><span class="Operator">.</span><span class="Identifier">A</span><span class="Punctuation">,</span> <span class="Identifier">Class</span><span class="Operator">.</span><span class="Keyword">IN</span><span class="Punctuation">,</span> <span class="DecNumber">299'i32</span><span class="Punctuation">,</span> <span class="DecNumber">4'</span><span class="Identifier">u16</span><span class="Punctuation">,</span>
                             <span class="Identifier">RDataA</span><span class="Punctuation">(</span><span class="Identifier">address</span><span class="Punctuation">:</span> <span class="Punctuation">[</span><span class="DecNumber">104'</span><span class="Identifier">u8</span><span class="Punctuation">,</span> <span class="DecNumber">28</span><span class="Punctuation">,</span> <span class="DecNumber">19</span><span class="Punctuation">,</span> <span class="DecNumber">79</span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">)</span>
  <span class="Comment"># The `rdlength` parameter does not need a value, as the `toBinMsg()` does not</span>
  <span class="Comment"># use it. The `toBinMsg()` takes the binary size of `rdata` and writes it to</span>
  <span class="Comment"># the binary DNS message.</span>

<span class="Keyword">let</span> <span class="Identifier">rr3</span> <span class="Operator">=</span> <span class="Identifier">initResourceRecord</span><span class="Punctuation">(</span><span class="StringLit">&quot;nim-lang.org.&quot;</span><span class="Punctuation">,</span> <span class="Keyword">Type</span><span class="Operator">.</span><span class="Identifier">A</span><span class="Punctuation">,</span> <span class="Identifier">Class</span><span class="Operator">.</span><span class="Keyword">IN</span><span class="Punctuation">,</span> <span class="DecNumber">299'i32</span><span class="Punctuation">,</span> <span class="DecNumber">4'</span><span class="Identifier">u16</span><span class="Punctuation">,</span>
                             <span class="Identifier">RDataA</span><span class="Punctuation">(</span><span class="Identifier">address</span><span class="Punctuation">:</span> <span class="Punctuation">[</span><span class="DecNumber">104'</span><span class="Identifier">u8</span><span class="Punctuation">,</span> <span class="DecNumber">28</span><span class="Punctuation">,</span> <span class="DecNumber">18</span><span class="Punctuation">,</span> <span class="DecNumber">79</span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">)</span>

<span class="Keyword">let</span> <span class="Identifier">msg</span> <span class="Operator">=</span> <span class="Identifier">initMessage</span><span class="Punctuation">(</span><span class="Identifier">header</span><span class="Punctuation">,</span> <span class="Operator">@</span><span class="Punctuation">[</span><span class="Identifier">question</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Operator">@</span><span class="Punctuation">[</span><span class="Identifier">rr1</span><span class="Punctuation">,</span> <span class="Identifier">rr2</span><span class="Punctuation">,</span> <span class="Identifier">rr3</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
  <span class="Comment"># The initializer automatically changes: `header.qdcount` to `1'u16` and</span>
  <span class="Comment"># `header.ancount` to `3'u16`.</span>

<span class="Identifier">echo</span> <span class="Identifier">repr</span><span class="Punctuation">(</span><span class="Identifier">msg</span><span class="Punctuation">)</span> <span class="Comment"># repr() to show RDatas (RDataA)</span>

<span class="Keyword">let</span> <span class="Identifier">bmsg</span> <span class="Operator">=</span> <span class="Identifier">toBinMsg</span><span class="Punctuation">(</span><span class="Identifier">msg</span><span class="Punctuation">)</span>

<span class="Identifier">echo</span> <span class="StringLit">&quot;</span><span class="EscapeSequence">\n</span><span class="StringLit">&quot;</span><span class="Punctuation">,</span> <span class="Identifier">bmsg</span>
</pre></p>
</p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="dnsprotocol/rdatas.html">dnsprotocol/rdatas</a>, <a class="reference external" href="dnsprotocol/streams2.html">dnsprotocol/streams2</a>, <a class="reference external" href="dnsprotocol/types.html">dnsprotocol/types</a>, <a class="reference external" href="dnsprotocol/utils.html">dnsprotocol/utils</a>
</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<a id="initHeader,uint16,QR,OpCode,bool,bool,bool,bool,RCode,uint16,uint16,uint16,uint16"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#initHeader%2Cuint16%2CQR%2COpCode%2Cbool%2Cbool%2Cbool%2Cbool%2CRCode%2Cuint16%2Cuint16%2Cuint16%2Cuint16"><span class="Identifier">initHeader</span></a><span class="Other">(</span><span class="Identifier">id</span><span class="Other">:</span> <span class="Identifier">uint16</span> <span class="Other">=</span> <span class="DecNumber">0'u16</span><span class="Other">;</span> <span class="Identifier">qr</span><span class="Other">:</span> <a href="dnsprotocol/types.html#QR"><span class="Identifier">QR</span></a> <span class="Other">=</span> <a href="dnsprotocol/types.html#QR"><span class="Identifier">QR</span></a><span class="Other">.</span><span class="Identifier">Query</span><span class="Other">;</span>
                <span class="Identifier">opcode</span><span class="Other">:</span> <a href="dnsprotocol/types.html#OpCode"><span class="Identifier">OpCode</span></a> <span class="Other">=</span> <a href="dnsprotocol/types.html#OpCode"><span class="Identifier">OpCode</span></a><span class="Other">.</span><span class="Identifier">Query</span><span class="Other">;</span> <span class="Identifier">aa</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">;</span>
                <span class="Identifier">tc</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">;</span> <span class="Identifier">rd</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">;</span> <span class="Identifier">ra</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">;</span>
                <span class="Identifier">rcode</span><span class="Other">:</span> <a href="dnsprotocol/types.html#RCode"><span class="Identifier">RCode</span></a> <span class="Other">=</span> <a href="dnsprotocol/types.html#RCode"><span class="Identifier">RCode</span></a><span class="Other">.</span><span class="Identifier">NoError</span><span class="Other">;</span> <span class="Identifier">qdcount</span><span class="Other">:</span> <span class="Identifier">uint16</span> <span class="Other">=</span> <span class="DecNumber">0'u16</span><span class="Other">;</span>
                <span class="Identifier">ancount</span><span class="Other">:</span> <span class="Identifier">uint16</span> <span class="Other">=</span> <span class="DecNumber">0'u16</span><span class="Other">;</span> <span class="Identifier">nscount</span><span class="Other">:</span> <span class="Identifier">uint16</span> <span class="Other">=</span> <span class="DecNumber">0'u16</span><span class="Other">;</span>
                <span class="Identifier">arcount</span><span class="Other">:</span> <span class="Identifier">uint16</span> <span class="Other">=</span> <span class="DecNumber">0'u16</span><span class="Other">)</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Header"><span class="Identifier">Header</span></a> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Returns a created <tt class="docutils literal"><span class="pre">Header</span></tt> object.</p>
<p>The header includes fields that specify which of the remaining sections are present, and also specify whether the message is a query or a response, a standard query or some other opcode, etc.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre">id</span></tt> is an identifier assigned to any kind of query. This identifier is copied the corresponding reply and can be used to match up replies to outstanding queries.</li>
<li><tt class="docutils literal"><span class="pre">qr</span></tt> specifies whether this message is a query (<tt class="docutils literal"><span class="pre">QR.Query</span></tt>) or a response (<tt class="docutils literal"><span class="pre">QR.Response</span></tt>).</li>
<li><tt class="docutils literal"><span class="pre">opcode</span></tt> specifies kind of query. This value is set by the originator of a query and copied into the response. See <a class="reference external" href="dnsprotocol/types.html#OpCode">OpCode</a>.</li>
<li><tt class="docutils literal"><span class="pre">aa</span></tt> is a parameter valid in responses, and if it is <tt class="docutils literal"><span class="pre">true</span></tt>, specifies that the responding name server is an authority for the domain name in question section.</li>
<li><tt class="docutils literal"><span class="pre">tc</span></tt>, if <tt class="docutils literal"><span class="pre">true</span></tt>, specifies that this message was truncated due to length greater than permitted on the transmission channel.</li>
<li><tt class="docutils literal"><span class="pre">rd</span></tt> is a parameter set in a query and is copied into the response. If it is <tt class="docutils literal"><span class="pre">true</span></tt>, it directs the name server to pursue the query recursively.</li>
<li><tt class="docutils literal"><span class="pre">ra</span></tt> is set in a response. If it is <tt class="docutils literal"><span class="pre">true</span></tt>, denotes whether recursive query support is available in the name server.</li>
<li><tt class="docutils literal"><span class="pre">rcode</span></tt> is a parameter set as part of responses. See <a class="reference external" href="dnsprotocol/types.html#RCode">RCode</a>.</li>
<li><tt class="docutils literal"><span class="pre">qdcount</span></tt> specifies the number of entries in the question section.</li>
<li><tt class="docutils literal"><span class="pre">ancount</span></tt> specifies the number of resource records in the answer section.</li>
<li><tt class="docutils literal"><span class="pre">nscount</span></tt> specifies the number of name server resource records in the authority records section.</li>
<li><tt class="docutils literal"><span class="pre">arcount</span></tt> specifies the number of resource records in the additional records section.</li>
</ul>

&nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L85"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L85" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="initQuestion,string,QType,QClass"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#initQuestion%2Cstring%2CQType%2CQClass"><span class="Identifier">initQuestion</span></a><span class="Other">(</span><span class="Identifier">qname</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">qtype</span><span class="Other">:</span> <a href="dnsprotocol/types.html#QType"><span class="Identifier">QType</span></a><span class="Other">;</span> <span class="Identifier">qclass</span><span class="Other">:</span> <a href="dnsprotocol/types.html#QClass"><span class="Identifier">QClass</span></a> <span class="Other">=</span> <a href="dnsprotocol/types.html#QClass"><span class="Identifier">QClass</span></a><span class="Other">.</span><span class="Identifier">IN</span><span class="Other">)</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Question"><span class="Identifier">Question</span></a> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma">
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Returns a created <tt class="docutils literal"><span class="pre">Question</span></tt> object.</p>
<p>The question contains fields that describe a question to a name server.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre">qname</span></tt> is a domain name. It can be an empty string <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">qtype</span></tt> specifies the type of the query. See <a class="reference external" href="dnsprotocol/types.html#QType">QType</a>.</li>
<li><tt class="docutils literal"><span class="pre">qclass</span></tt> specifies the class of the query. See <a class="reference external" href="dnsprotocol/types.html#QClass">QClass</a>.</li>
</ul>

&nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L138"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L138" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="initResourceRecord,string,Type,Class,int32,uint16,RDatas"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#initResourceRecord%2Cstring%2CType%2CClass%2Cint32%2Cuint16%2CRDatas"><span class="Identifier">initResourceRecord</span></a><span class="Other">(</span><span class="Identifier">name</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">type</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Type"><span class="Identifier">Type</span></a><span class="Other">;</span> <span class="Identifier">class</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Class"><span class="Identifier">Class</span></a><span class="Other">;</span> <span class="Identifier">ttl</span><span class="Other">:</span> <span class="Identifier">int32</span><span class="Other">;</span>
                        <span class="Identifier">rdlength</span><span class="Other">:</span> <span class="Identifier">uint16</span><span class="Other">;</span> <span class="Identifier">rdata</span><span class="Other">:</span> <a href="dnsprotocol/types.html#RDatas"><span class="Identifier">RDatas</span></a><span class="Other">)</span><span class="Other">:</span> <a href="dnsprotocol/types.html#ResourceRecord"><span class="Identifier">ResourceRecord</span></a></pre></dt>
<dd>

<p>Returns a created <tt class="docutils literal"><span class="pre">ResourceRecord</span></tt> object.</p>
<p>The answer, authority, and additional sections all share the same format: a variable number of resource records, where the number of records is specified in the corresponding count field in the header.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre">name</span></tt> is an owner name, i.e., the name of the node to which this resource record pertains.</li>
<li><tt class="docutils literal"><span class="pre">type</span></tt> specifies the type of the resource record. See <a class="reference external" href="dnsprotocol/types.html#Type">Type</a>.</li>
<li><tt class="docutils literal"><span class="pre">class</span></tt> specifies the class of the resource record. See <a class="reference external" href="dnsprotocol/types.html#Class">Class</a>.</li>
<li><tt class="docutils literal"><span class="pre">ttl</span></tt> specifies the time interval that the resource record may be cached before the source of the information should again be consulted.</li>
<li><tt class="docutils literal"><span class="pre">rdlength</span></tt> specifies the length of the <tt class="docutils literal"><span class="pre">rdata</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">rdata</span></tt> describes the resource. The format of this information varies according to the <tt class="docutils literal"><span class="pre">Type</span></tt> and <tt class="docutils literal"><span class="pre">Class</span></tt> of the resource record. See <a class="reference external" href="dnsprotocol/types.html#RDatas">RDatas</a>.</li>
</ul>
<p><strong>Note</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre">rdata</span></tt> can be initialized as <tt class="docutils literal"><span class="pre">nil</span></tt>, but it is not recommended.</li>
</ul>

&nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L158"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L158" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="initMessage,Header,Questions,Answers,Authorities,Additionals"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#initMessage%2CHeader%2CQuestions%2CAnswers%2CAuthorities%2CAdditionals"><span class="Identifier">initMessage</span></a><span class="Other">(</span><span class="Identifier">header</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Header"><span class="Identifier">Header</span></a><span class="Other">;</span> <span class="Identifier">questions</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Questions"><span class="Identifier">Questions</span></a> <span class="Other">=</span> <span class="Operator">@</span><span class="Other">[</span><span class="Other">]</span><span class="Other">;</span>
                 <span class="Identifier">answers</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Answers"><span class="Identifier">Answers</span></a> <span class="Other">=</span> <span class="Operator">@</span><span class="Other">[</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">authorities</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Authorities"><span class="Identifier">Authorities</span></a> <span class="Other">=</span> <span class="Operator">@</span><span class="Other">[</span><span class="Other">]</span><span class="Other">;</span>
                 <span class="Identifier">additionals</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Additionals"><span class="Identifier">Additionals</span></a> <span class="Other">=</span> <span class="Operator">@</span><span class="Other">[</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Message"><span class="Identifier">Message</span></a> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma">
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Returns a created <tt class="docutils literal"><span class="pre">Message</span></tt> object.</p>
<p>All communications inside of the DNS protocol are carried in a single format called a message. The top level format of message is divided into 5 sections (some of which are empty in certain cases) shown below:</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre">header</span></tt> includes fields that specify which of the remaining sections are present, and also specify whether the message is a query or a response, a standard query or some other opcode, etc.</li>
<li><tt class="docutils literal"><span class="pre">question</span></tt> contains zero or more questions for a name server.</li>
<li><tt class="docutils literal"><span class="pre">answers</span></tt> contains zero or more resource records that answer the question.</li>
<li><tt class="docutils literal"><span class="pre">authorities</span></tt> contains zero or more resource records that point toward an authoritative name server.</li>
<li><tt class="docutils literal"><span class="pre">additionals</span></tt> contains zero or more resource records which relate to the query, but are not strictly answers for the question.</li>
</ul>

&nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L193"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L193" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="toBinMsg,Header,StringStream"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#toBinMsg%2CHeader%2CStringStream"><span class="Identifier">toBinMsg</span></a><span class="Other">(</span><span class="Identifier">header</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Header"><span class="Identifier">Header</span></a><span class="Other">;</span> <span class="Identifier">ss</span><span class="Other">:</span> <span class="Identifier">StringStream</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Turns a <tt class="docutils literal"><span class="pre">Header</span></tt> object into a binary DNS protocol message stored in <tt class="docutils literal"><span class="pre">ss</span></tt>.</p>
<p>The use of this procedure is advised for optimization purposes when you know what to do. Otherwise, use <a class="reference external" href="#toBinMsg,Message,bool">toBinMsg</a></p>

&nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L239"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L239" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="toBinMsg,Question,StringStream,Table[string,uint16]"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#toBinMsg%2CQuestion%2CStringStream%2CTable%5Bstring%2Cuint16%5D"><span class="Identifier">toBinMsg</span></a><span class="Other">(</span><span class="Identifier">question</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Question"><span class="Identifier">Question</span></a><span class="Other">;</span> <span class="Identifier">ss</span><span class="Other">:</span> <span class="Identifier">StringStream</span><span class="Other">;</span>
              <span class="Identifier">dictionary</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Table</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">,</span> <span class="Identifier">uint16</span><span class="Other">]</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma">
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Turns a <tt class="docutils literal"><span class="pre">Question</span></tt> object into a binary DNS protocol message stored in <tt class="docutils literal"><span class="pre">ss</span></tt>.</p>
<p>The use of this procedure is advised for optimization purposes when you know what to do. Otherwise, use <a class="reference external" href="#toBinMsg,Message,bool">toBinMsg</a></p>

&nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L270"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L270" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="toBinMsg,ResourceRecord,StringStream,Table[string,uint16]"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#toBinMsg%2CResourceRecord%2CStringStream%2CTable%5Bstring%2Cuint16%5D"><span class="Identifier">toBinMsg</span></a><span class="Other">(</span><span class="Identifier">rr</span><span class="Other">:</span> <a href="dnsprotocol/types.html#ResourceRecord"><span class="Identifier">ResourceRecord</span></a><span class="Other">;</span> <span class="Identifier">ss</span><span class="Other">:</span> <span class="Identifier">StringStream</span><span class="Other">;</span>
              <span class="Identifier">dictionary</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Table</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">,</span> <span class="Identifier">uint16</span><span class="Other">]</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma">
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Turns a <tt class="docutils literal"><span class="pre">ResourceRecord</span></tt> object into a binary DNS protocol message stored in <tt class="docutils literal"><span class="pre">ss</span></tt>.</p>
<p>The use of this procedure is advised for optimization purposes when you know what to do. Otherwise, use <a class="reference external" href="#toBinMsg,Message,bool">toBinMsg</a></p>

&nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L281"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L281" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="toBinMsg,Message,bool"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#toBinMsg%2CMessage%2Cbool"><span class="Identifier">toBinMsg</span></a><span class="Other">(</span><span class="Identifier">msg</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Message"><span class="Identifier">Message</span></a><span class="Other">;</span> <span class="Identifier">isTcp</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <a href="dnsprotocol/types.html#BinMsg"><span class="Identifier">BinMsg</span></a> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma">
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Returns a binary DNS protocol message from the <tt class="docutils literal"><span class="pre">msg</span></tt>. If <tt class="docutils literal"><span class="pre">isTcp</span></tt> is <tt class="docutils literal"><span class="pre">true</span></tt>, the message is prefixed with a two byte length field which gives the message length, excluding the two byte length field.
&nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L311"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L311" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="parseMessage,BinMsg"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#parseMessage%2CBinMsg"><span class="Identifier">parseMessage</span></a><span class="Other">(</span><span class="Identifier">bmsg</span><span class="Other">:</span> <a href="dnsprotocol/types.html#BinMsg"><span class="Identifier">BinMsg</span></a><span class="Other">)</span><span class="Other">:</span> <a href="dnsprotocol/types.html#Message"><span class="Identifier">Message</span></a> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma">
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Parses a binary DNS protocol message contained in <tt class="docutils literal"><span class="pre">bmsg</span></tt>.
&nbsp;&nbsp;<a
href="https://github.com/rockcavera/nim-dnsprotocol/tree/main/src/dnsprotocol.nim#L396"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/rockcavera/nim-dnsprotocol/edit/main/src/dnsprotocol.nim#L396" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>
<div class="section" id="19">
<h1><a class="toc-backref" href="#19">Exports</a></h1>
<dl class="item">
<a href="dnsprotocol/types.html#RDataMD"><span class="Identifier">RDataMD</span></a>, <a href="dnsprotocol/types.html#Answers"><span class="Identifier">Answers</span></a>, <a href="dnsprotocol/types.html#Header"><span class="Identifier">Header</span></a>, <a href="dnsprotocol/types.html#Question"><span class="Identifier">Question</span></a>, <a href="dnsprotocol/types.html#QClass"><span class="Identifier">QClass</span></a>, <a href="dnsprotocol/types.html#RDataMINFO"><span class="Identifier">RDataMINFO</span></a>, <a href="dnsprotocol/types.html#Authorities"><span class="Identifier">Authorities</span></a>, <a href="dnsprotocol/types.html#RDataNULL"><span class="Identifier">RDataNULL</span></a>, <a href="dnsprotocol/types.html#BinMsg"><span class="Identifier">BinMsg</span></a>, <a href="dnsprotocol/types.html#RDataMG"><span class="Identifier">RDataMG</span></a>, <a href="dnsprotocol/types.html#Additionals"><span class="Identifier">Additionals</span></a>, <a href="dnsprotocol/types.html#QType"><span class="Identifier">QType</span></a>, <a href="dnsprotocol/types.html#Type"><span class="Identifier">Type</span></a>, <a href="dnsprotocol/types.html#QR"><span class="Identifier">QR</span></a>, <a href="dnsprotocol/types.html#Class"><span class="Identifier">Class</span></a>, <a href="dnsprotocol/types.html#RCode"><span class="Identifier">RCode</span></a>, <a href="dnsprotocol/types.html#RDatas"><span class="Identifier">RDatas</span></a>, <a href="dnsprotocol/types.html#RDataMB"><span class="Identifier">RDataMB</span></a>, <a href="dnsprotocol/types.html#RDataAAAA"><span class="Identifier">RDataAAAA</span></a>, <a href="dnsprotocol/types.html#Message"><span class="Identifier">Message</span></a>, <a href="dnsprotocol/types.html#RDataMX"><span class="Identifier">RDataMX</span></a>, <a href="dnsprotocol/types.html#RDataMF"><span class="Identifier">RDataMF</span></a>, <a href="dnsprotocol/types.html#RDataNS"><span class="Identifier">RDataNS</span></a>, <a href="dnsprotocol/types.html#CAAFlags"><span class="Identifier">CAAFlags</span></a>, <a href="dnsprotocol/types.html#RDataCAA"><span class="Identifier">RDataCAA</span></a>, <a href="dnsprotocol/types.html#OpCode"><span class="Identifier">OpCode</span></a>, <a href="dnsprotocol/types.html#RDataCNAME"><span class="Identifier">RDataCNAME</span></a>, <a href="dnsprotocol/types.html#Questions"><span class="Identifier">Questions</span></a>, <a href="dnsprotocol/types.html#RDataMR"><span class="Identifier">RDataMR</span></a>, <a href="dnsprotocol/types.html#RDataPTR"><span class="Identifier">RDataPTR</span></a>, <a href="dnsprotocol/types.html#ResourceRecord"><span class="Identifier">ResourceRecord</span></a>, <a href="dnsprotocol/types.html#RDataSOA"><span class="Identifier">RDataSOA</span></a>, <a href="dnsprotocol/types.html#RDataTXT"><span class="Identifier">RDataTXT</span></a>, <a href="dnsprotocol/types.html#Flags"><span class="Identifier">Flags</span></a>, <a href="dnsprotocol/types.html#RDataHINFO"><span class="Identifier">RDataHINFO</span></a>, <a href="dnsprotocol/types.html#RDataA"><span class="Identifier">RDataA</span></a>, <a href="dnsprotocol/types.html#RDataWKS"><span class="Identifier">RDataWKS</span></a>, <a href="dnsprotocol/types.html#RData"><span class="Identifier">RData</span></a>, <a href="dnsprotocol/types.html#RDataUnknown"><span class="Identifier">RDataUnknown</span></a>
</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2020-12-19 01:59:44 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
