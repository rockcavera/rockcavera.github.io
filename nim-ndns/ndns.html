<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>src/ndns</title>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<!-- JS -->
<script type="text/javascript" src="dochack.js"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">src/ndns</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-select-wrapper">
      <label for="theme-select">Theme:&nbsp;</label>
      <select id="theme-select" onchange="setTheme(this.value)">
        <option value="auto">ðŸŒ— Match OS</option>
        <option value="dark">ðŸŒ‘ Dark</option>
        <option value="light">ðŸŒ• Light</option>
      </select>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a id="indexLink" href="theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" onkeyup="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li><a class="reference" id="basic-use_toc" href="#basic-use">Basic Use</a></li>
<li><a class="reference" id="advanced-use_toc" href="#advanced-use">Advanced Use</a></li>
<li><a class="reference" id="using-system-dns-server_toc" href="#using-system-dns-server">Using System DNS Server</a></li>
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#7" id="57">Types</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#DnsClient" title="DnsClient = object
  ip: string                 ## Dns server IP.
  port: Port                 ## DNS server listening port.
  domain: Domain">DnsClient</a></li>
<li><a class="reference" href="#IsNotAnResponseError" title="IsNotAnResponseError = object of CatchableError">IsNotAnResponseError</a></li>
<li><a class="reference" href="#OpCodeNotEqualError" title="OpCodeNotEqualError = object of CatchableError">OpCodeNotEqualError</a></li>
<li><a class="reference" href="#ResponseIdNotEqualError" title="ResponseIdNotEqualError = object of CatchableError">ResponseIdNotEqualError</a></li>
<li><a class="reference" href="#ResponseIpNotEqualError" title="ResponseIpNotEqualError = object of CatchableError">ResponseIpNotEqualError</a></li>
<li><a class="reference" href="#ResponsePortNotEqualError" title="ResponsePortNotEqualError = object of CatchableError">ResponsePortNotEqualError</a></li>
<li><a class="reference" href="#UnexpectedDisconnectionError" title="UnexpectedDisconnectionError = object of CatchableError">UnexpectedDisconnectionError</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#10" id="60">Consts</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#ndnsDnsServerIp" title="ndnsDnsServerIp {.strdefine.} = &quot;8.8.8.8&quot;">ndnsDnsServerIp</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">asyncResolveDnsBL
  <li><a class="reference" href="#asyncResolveDnsBL%2CDnsClient%2Cstring%2Cstring%2Cint" title="asyncResolveDnsBL(client: DnsClient; ip, dnsbl: string; timeout: int = 500): owned(
    Future[seq[string]])">asyncResolveDnsBL(client: DnsClient; ip, dnsbl: string; timeout: int = 500): owned(
    Future[seq[string]])</a></li>

</ul>
<ul class="simple nested-toc-section">asyncResolveIpv4
  <li><a class="reference" href="#asyncResolveIpv4%2CDnsClient%2Cstring%2Cint" title="asyncResolveIpv4(client: DnsClient; domain: string; timeout: int = 500): owned(
    Future[seq[string]])">asyncResolveIpv4(client: DnsClient; domain: string; timeout: int = 500): owned(
    Future[seq[string]])</a></li>

</ul>
<ul class="simple nested-toc-section">asyncResolveIpv6
  <li><a class="reference" href="#asyncResolveIpv6%2CDnsClient%2Cstring%2Cint" title="asyncResolveIpv6(client: DnsClient; domain: string; timeout: int = 500): owned(
    Future[seq[string]])">asyncResolveIpv6(client: DnsClient; domain: string; timeout: int = 500): owned(
    Future[seq[string]])</a></li>

</ul>
<ul class="simple nested-toc-section">asyncResolveRDns
  <li><a class="reference" href="#asyncResolveRDns%2CDnsClient%2Cstring%2Cint" title="asyncResolveRDns(client: DnsClient; ip: string; timeout: int = 500): owned(
    Future[seq[string]])">asyncResolveRDns(client: DnsClient; ip: string; timeout: int = 500): owned(
    Future[seq[string]])</a></li>

</ul>
<ul class="simple nested-toc-section">dnsAsyncQuery
  <li><a class="reference" href="#dnsAsyncQuery%2CDnsClient%2CMessage%2Cint" title="dnsAsyncQuery(client: DnsClient; msg: Message; timeout: int = 500;
              retransmit = false): owned(Future[Message])">dnsAsyncQuery(client: DnsClient; msg: Message; timeout: int = 500;
              retransmit = false): owned(Future[Message])</a></li>

</ul>
<ul class="simple nested-toc-section">dnsAsyncTcpQuery
  <li><a class="reference" href="#dnsAsyncTcpQuery%2CDnsClient%2CMessage%2Cint" title="dnsAsyncTcpQuery(client: DnsClient; msg: Message; timeout: int = 500): owned(
    Future[Message])">dnsAsyncTcpQuery(client: DnsClient; msg: Message; timeout: int = 500): owned(
    Future[Message])</a></li>

</ul>
<ul class="simple nested-toc-section">dnsQuery
  <li><a class="reference" href="#dnsQuery%2CDnsClient%2CMessage%2Cint" title="dnsQuery(client: DnsClient; msg: Message; timeout: int = -1; retransmit = false): Message">dnsQuery(client: DnsClient; msg: Message; timeout: int = -1; retransmit = false): Message</a></li>

</ul>
<ul class="simple nested-toc-section">dnsTcpQuery
  <li><a class="reference" href="#dnsTcpQuery%2CDnsClient%2CMessage%2Cint" title="dnsTcpQuery(client: DnsClient; msg: Message; timeout: int = -1): Message">dnsTcpQuery(client: DnsClient; msg: Message; timeout: int = -1): Message</a></li>

</ul>
<ul class="simple nested-toc-section">getIp
  <li><a class="reference" href="#getIp%2CDnsClient" title="getIp(client: DnsClient): string">getIp(client: DnsClient): string</a></li>

</ul>
<ul class="simple nested-toc-section">getPort
  <li><a class="reference" href="#getPort%2CDnsClient" title="getPort(client: DnsClient): Port">getPort(client: DnsClient): Port</a></li>

</ul>
<ul class="simple nested-toc-section">initDnsClient
  <li><a class="reference" href="#initDnsClient%2Cstring%2CPort" title="initDnsClient(ip: string = ndnsDnsServerIp; port: Port = Port(53)): DnsClient">initDnsClient(ip: string = ndnsDnsServerIp; port: Port = Port(53)): DnsClient</a></li>

</ul>
<ul class="simple nested-toc-section">initSystemDnsClient
  <li><a class="reference" href="#initSystemDnsClient" title="initSystemDnsClient(): DnsClient">initSystemDnsClient(): DnsClient</a></li>

</ul>
<ul class="simple nested-toc-section">prepareDnsBL
  <li><a class="reference" href="#prepareDnsBL%2Cstring%2Cstring" title="prepareDnsBL(ip, dnsbl: string): string">prepareDnsBL(ip, dnsbl: string): string</a></li>

</ul>
<ul class="simple nested-toc-section">prepareRDns
  <li><a class="reference" href="#prepareRDns%2Cstring" title="prepareRDns(ip: string): string">prepareRDns(ip: string): string</a></li>

</ul>
<ul class="simple nested-toc-section">randId
  <li><a class="reference" href="#randId" title="randId(): uint16">randId(): uint16</a></li>

</ul>
<ul class="simple nested-toc-section">resolveDnsBL
  <li><a class="reference" href="#resolveDnsBL%2CDnsClient%2Cstring%2Cstring%2Cint" title="resolveDnsBL(client: DnsClient; ip, dnsbl: string; timeout: int = -1): seq[
    string]">resolveDnsBL(client: DnsClient; ip, dnsbl: string; timeout: int = -1): seq[
    string]</a></li>

</ul>
<ul class="simple nested-toc-section">resolveIpv4
  <li><a class="reference" href="#resolveIpv4%2CDnsClient%2Cstring%2Cint" title="resolveIpv4(client: DnsClient; domain: string; timeout: int = -1): seq[string]">resolveIpv4(client: DnsClient; domain: string; timeout: int = -1): seq[string]</a></li>

</ul>
<ul class="simple nested-toc-section">resolveIpv6
  <li><a class="reference" href="#resolveIpv6%2CDnsClient%2Cstring%2Cint" title="resolveIpv6(client: DnsClient; domain: string; timeout: int = -1): seq[string]">resolveIpv6(client: DnsClient; domain: string; timeout: int = -1): seq[string]</a></li>

</ul>
<ul class="simple nested-toc-section">resolveRDns
  <li><a class="reference" href="#resolveRDns%2CDnsClient%2Cstring%2Cint" title="resolveRDns(client: DnsClient; ip: string; timeout: int = -1): seq[string]">resolveRDns(client: DnsClient; ip: string; timeout: int = -1): seq[string]</a></li>

</ul>

    </ul>
  </details>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L1" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L1" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

    <div id="tocRoot"></div>
    
    <p class="module-desc"><p>A pure Nim Domain Name System (DNS) client implemented with <a class="reference external" href="https://github.com/rockcavera/nim-dnsprotocol">dnsprotocol</a>.</p>
<p>This implementation has synchronous and asynchronous (async) procedures (procs) for transmitting data over the internet, using both UDP and TCP protocol.</p>

<h1><a class="toc-backref" id="basic-use" href="#basic-use">Basic Use</a></h1><p>Resolving IPv4 addresses for nim-lang.org (<strong>not async</strong>):</p>
<p><pre class="listing">
<span class="Keyword">import</span> <span class="Identifier">ndns</span>

<span class="Keyword">let</span> <span class="Identifier">client</span> <span class="Operator">=</span> <span class="Identifier">initDnsClient</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Identifier">echo</span> <span class="Identifier">resolveIpv4</span><span class="Punctuation">(</span><span class="Identifier">client</span><span class="Punctuation">,</span> <span class="StringLit">&quot;nim-lang.org&quot;</span><span class="Punctuation">)</span></pre></p>
<p>Resolving IPv4 addresses for nim-lang.org (<strong>async</strong>):</p>
<p><pre class="listing">
<span class="Keyword">import</span> <span class="Identifier">asyncdispatch</span><span class="Punctuation">,</span> <span class="Identifier">ndns</span>

<span class="Keyword">let</span> <span class="Identifier">client</span> <span class="Operator">=</span> <span class="Identifier">initDnsClient</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Identifier">echo</span> <span class="Identifier">waitFor</span> <span class="Identifier">asyncResolveIpv4</span><span class="Punctuation">(</span><span class="Identifier">client</span><span class="Punctuation">,</span> <span class="StringLit">&quot;nim-lang.org&quot;</span><span class="Punctuation">)</span></pre></p>

<h1><a class="toc-backref" id="advanced-use" href="#advanced-use">Advanced Use</a></h1><p>Creating a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> object with a <tt class="docutils literal"><span class="pre"><span class="Identifier">QType</span><span class="Operator">.</span><span class="Identifier">A</span></span></tt> query for the domain name nim-lang.org, transmitting the <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> and receiving the response (<strong>not async</strong>):</p>
<p><pre class="listing">
<span class="Keyword">import</span> <span class="Identifier">ndns</span>

<span class="Keyword">let</span> <span class="Identifier">header</span> <span class="Operator">=</span> <span class="Identifier">initHeader</span><span class="Punctuation">(</span><span class="Identifier">randId</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">rd</span> <span class="Operator">=</span> <span class="Identifier">true</span><span class="Punctuation">)</span>

<span class="Keyword">let</span> <span class="Identifier">question</span> <span class="Operator">=</span> <span class="Identifier">initQuestion</span><span class="Punctuation">(</span><span class="StringLit">&quot;nim-lang.org&quot;</span><span class="Punctuation">,</span> <span class="Identifier">QType</span><span class="Operator">.</span><span class="Identifier">A</span><span class="Punctuation">,</span> <span class="Identifier">QClass</span><span class="Operator">.</span><span class="Keyword">IN</span><span class="Punctuation">)</span>
  <span class="Comment"># If the last character of &quot;nim-lang.org&quot; is not a '.', the initializer will</span>
  <span class="Comment"># add, as it is called the DNS root.</span>

<span class="Keyword">let</span> <span class="Identifier">msg</span> <span class="Operator">=</span> <span class="Identifier">initMessage</span><span class="Punctuation">(</span><span class="Identifier">header</span><span class="Punctuation">,</span> <span class="Operator">@</span><span class="Punctuation">[</span><span class="Identifier">question</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
  <span class="Comment"># The initializer automatically changes `header.qdcount` to `1'u16`</span>

<span class="Keyword">let</span> <span class="Identifier">client</span> <span class="Operator">=</span> <span class="Identifier">initDnsClient</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">var</span> <span class="Identifier">rmsg</span> <span class="Operator">=</span> <span class="Identifier">dnsQuery</span><span class="Punctuation">(</span><span class="Identifier">client</span><span class="Punctuation">,</span> <span class="Identifier">msg</span><span class="Punctuation">)</span>

<span class="Identifier">echo</span> <span class="Identifier">repr</span><span class="Punctuation">(</span><span class="Identifier">rmsg</span><span class="Punctuation">)</span></pre></p>
<p>Creating a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> object with a <tt class="docutils literal"><span class="pre"><span class="Identifier">QType</span><span class="Operator">.</span><span class="Identifier">A</span></span></tt> query for the domain name nim-lang.org, transmitting the <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> and receiving the response (<strong>async</strong>):</p>
<p><pre class="listing">
<span class="Keyword">import</span> <span class="Identifier">asyncdispatch</span><span class="Punctuation">,</span> <span class="Identifier">ndns</span>

<span class="Keyword">let</span> <span class="Identifier">header</span> <span class="Operator">=</span> <span class="Identifier">initHeader</span><span class="Punctuation">(</span><span class="Identifier">randId</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">rd</span> <span class="Operator">=</span> <span class="Identifier">true</span><span class="Punctuation">)</span>

<span class="Keyword">let</span> <span class="Identifier">question</span> <span class="Operator">=</span> <span class="Identifier">initQuestion</span><span class="Punctuation">(</span><span class="StringLit">&quot;nim-lang.org&quot;</span><span class="Punctuation">,</span> <span class="Identifier">QType</span><span class="Operator">.</span><span class="Identifier">A</span><span class="Punctuation">,</span> <span class="Identifier">QClass</span><span class="Operator">.</span><span class="Keyword">IN</span><span class="Punctuation">)</span>
  <span class="Comment"># If the last character of &quot;nim-lang.org&quot; is not a '.', the initializer will</span>
  <span class="Comment"># add, as it is called the DNS root.</span>

<span class="Keyword">let</span> <span class="Identifier">msg</span> <span class="Operator">=</span> <span class="Identifier">initMessage</span><span class="Punctuation">(</span><span class="Identifier">header</span><span class="Punctuation">,</span> <span class="Operator">@</span><span class="Punctuation">[</span><span class="Identifier">question</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
  <span class="Comment"># The initializer automatically changes `header.qdcount` to `1'u16`</span>

<span class="Keyword">let</span> <span class="Identifier">client</span> <span class="Operator">=</span> <span class="Identifier">initDnsClient</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">var</span> <span class="Identifier">rmsg</span> <span class="Operator">=</span> <span class="Identifier">waitFor</span> <span class="Identifier">dnsAsyncQuery</span><span class="Punctuation">(</span><span class="Identifier">client</span><span class="Punctuation">,</span> <span class="Identifier">msg</span><span class="Punctuation">)</span>

<span class="Identifier">echo</span> <span class="Identifier">repr</span><span class="Punctuation">(</span><span class="Identifier">rmsg</span><span class="Punctuation">)</span></pre></p>

<h1><a class="toc-backref" id="using-system-dns-server" href="#using-system-dns-server">Using System DNS Server</a></h1><p>You can initialize the DNS client with the DNS resolver server used by the system. To do this, start the client with <tt class="docutils literal"><span class="pre"><span class="Identifier">initSystemDnsClient</span></span></tt>.</p>
<p><pre class="listing">
<span class="Keyword">import</span> <span class="Identifier">ndns</span>

<span class="Keyword">let</span> <span class="Identifier">client</span> <span class="Operator">=</span> <span class="Identifier">initSystemDnsClient</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Identifier">echo</span> <span class="Identifier">resolveIpv4</span><span class="Punctuation">(</span><span class="Identifier">client</span><span class="Punctuation">,</span> <span class="StringLit">&quot;nim-lang.org&quot;</span><span class="Punctuation">)</span></pre> See <a class="reference external" href="#initSystemDnsClient">initSystemDnsClient()</a> for supported platforms.</p>
</p>
    <div class="section" id="6">
  <h1><a class="toc-backref" href="#6">Imports</a></h1>
  <dl class="item">
    <a class="reference external" href="ndns/platforms/winapi.html">ndns/platforms/winapi</a>, <a class="reference external" href="ndns/platforms/resolv.html">ndns/platforms/resolv</a>
  </dl>
</div>
<div class="section" id="7">
  <h1><a class="toc-backref" href="#7">Types</a></h1>
  <dl class="item">
    <div id="DnsClient">
  <dt><pre><a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">ip</span><span class="Other">:</span> <span class="Identifier">string</span>                 <span class="Comment">## Dns server IP.</span>
  <span class="Identifier">port</span><span class="Other">:</span> <span class="Identifier">Port</span>                 <span class="Comment">## DNS server listening port.</span>
  <span class="Identifier">domain</span><span class="Other">:</span> <span class="Identifier">Domain</span>
</pre></dt>
  <dd>
    
    Contains information about the DNS server.
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L106" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L106" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="IsNotAnResponseError">
  <dt><pre><a href="ndns.html#IsNotAnResponseError"><span class="Identifier">IsNotAnResponseError</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">CatchableError</span>
  </pre></dt>
  <dd>
    
    Raised if not a response (!= QR.Response).
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L121" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L121" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="OpCodeNotEqualError">
  <dt><pre><a href="ndns.html#OpCodeNotEqualError"><span class="Identifier">OpCodeNotEqualError</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">CatchableError</span>
  </pre></dt>
  <dd>
    
    Raised if the OpCode is different between the query and the response.
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L123" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L123" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="ResponseIdNotEqualError">
  <dt><pre><a href="ndns.html#ResponseIdNotEqualError"><span class="Identifier">ResponseIdNotEqualError</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">CatchableError</span>
  </pre></dt>
  <dd>
    
    Raised if the query ID does not match the response ID.
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L119" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L119" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="ResponseIpNotEqualError">
  <dt><pre><a href="ndns.html#ResponseIpNotEqualError"><span class="Identifier">ResponseIpNotEqualError</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">CatchableError</span>
  </pre></dt>
  <dd>
    
    Raised if the IP that sent the response is different from the IP that received the query (only UDP).
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L113" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L113" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="ResponsePortNotEqualError">
  <dt><pre><a href="ndns.html#ResponsePortNotEqualError"><span class="Identifier">ResponsePortNotEqualError</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">CatchableError</span>
  </pre></dt>
  <dd>
    
    Raised if the Port that sent the response is different from the Port that received the query (only UDP).
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L116" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L116" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="UnexpectedDisconnectionError">
  <dt><pre><a href="ndns.html#UnexpectedDisconnectionError"><span class="Identifier">UnexpectedDisconnectionError</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">CatchableError</span>
  </pre></dt>
  <dd>
    
    Raised if an unexpected disconnect occurs (only TCP).
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L111" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L111" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

  </dl>
</div>
<div class="section" id="10">
  <h1><a class="toc-backref" href="#10">Consts</a></h1>
  <dl class="item">
    <div id="ndnsDnsServerIp">
  <dt><pre><a href="ndns.html#ndnsDnsServerIp"><span class="Identifier">ndnsDnsServerIp</span></a> {.<span class="Identifier">strdefine</span>.} <span class="Other">=</span> <span class="StringLit">&quot;8.8.8.8&quot;</span></pre></dt>
  <dd>
    
    Default dns server ip for queries. You can change by compiling with <tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="Identifier">d</span><span class="Punctuation">:</span><span class="Identifier">ndnsDnsServerIp</span><span class="Operator">=</span><span class="FloatNumber">1.1</span><span class="Operator">.</span><span class="FloatNumber">1.1</span></span></tt>.
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L131" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L131" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

  </dl>
</div>
<div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="asyncResolveDnsBL-procs-all">
  <div id="asyncResolveDnsBL,DnsClient,string,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#asyncResolveDnsBL%2CDnsClient%2Cstring%2Cstring%2Cint"><span class="Identifier">asyncResolveDnsBL</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">ip</span><span class="Other">,</span> <span class="Identifier">dnsbl</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">500</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">stackTrace</span><span class="Other">:</span> <span class="DecNumber">false</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span>
    <span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns IPv4 addresses. Usually the loopback address (127.0.0.0/24), in which the last octet of IPv4 represents something on the black list.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt> is the IPv4 or IPv6 address that you want to know if it is blacklisted.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">dnsbl</span></span></tt> is the domain name for DnsBL queries.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server or to receive the response from the DNS server. When it is negative (less than 0), it will try to connect for an unlimited time or to receive the response for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L682" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L682" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="asyncResolveIpv4-procs-all">
  <div id="asyncResolveIpv4,DnsClient,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#asyncResolveIpv4%2CDnsClient%2Cstring%2Cint"><span class="Identifier">asyncResolveIpv4</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">domain</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">500</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">stackTrace</span><span class="Other">:</span> <span class="DecNumber">false</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span>
    <span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns all IPv4 addresses, in a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt>, that have been resolved from <tt class="docutils literal"><span class="pre"><span class="Identifier">domain</span></span></tt>. The <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt> can be empty.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">domain</span></span></tt> is the domain name that you wish to obtain IPv4 addresses.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server or to receive the response from the DNS server. When it is negative (less than 0), it will try to connect for an unlimited time or to receive the response for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L587" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L587" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="asyncResolveIpv6-procs-all">
  <div id="asyncResolveIpv6,DnsClient,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#asyncResolveIpv6%2CDnsClient%2Cstring%2Cint"><span class="Identifier">asyncResolveIpv6</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">domain</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">500</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">stackTrace</span><span class="Other">:</span> <span class="DecNumber">false</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span>
    <span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns all IPv6 addresses, in a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt>, that have been resolved from <tt class="docutils literal"><span class="pre"><span class="Identifier">domain</span></span></tt>. The <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt> can be empty.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">domain</span></span></tt> is the domain name that you wish to obtain IPv6 addresses.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server or to receive the response from the DNS server. When it is negative (less than 0), it will try to connect for an unlimited time or to receive the response for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L617" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L617" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="asyncResolveRDns-procs-all">
  <div id="asyncResolveRDns,DnsClient,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#asyncResolveRDns%2CDnsClient%2Cstring%2Cint"><span class="Identifier">asyncResolveRDns</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">ip</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">500</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">stackTrace</span><span class="Other">:</span> <span class="DecNumber">false</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span>
    <span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns all domain names, in a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt>, which is obtained by the &quot;reverse&quot; query of <tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt>. The <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt> can be empty.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt> is the IPv4 or IPv6 address that is intended to obtain the domain name, which represents the reverse address.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server or to receive the response from the DNS server. When it is negative (less than 0), it will try to connect for an unlimited time or to receive the response for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L648" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L648" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="dnsAsyncQuery-procs-all">
  <div id="dnsAsyncQuery,DnsClient,Message,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#dnsAsyncQuery%2CDnsClient%2CMessage%2Cint"><span class="Identifier">dnsAsyncQuery</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">msg</span><span class="Other">:</span> <span class="Identifier">Message</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">500</span><span class="Other">;</span>
                   <span class="Identifier">retransmit</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">Message</span><span class="Other">]</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">stackTrace</span><span class="Other">:</span> <span class="DecNumber">false</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> of the DNS query response performed using the UDP protocol.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">msg</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> object that contains the DNS query.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to receive the response from the DNS server. When it is negative (less than 0), it will try to receive the response for an unlimited time.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">retransmit</span></span></tt> when <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt>, determine the retransmission of the query to TCP protocol when the received response is truncated (<tt class="docutils literal"><span class="pre"><span class="Identifier">header</span><span class="Operator">.</span><span class="Identifier">flags</span><span class="Operator">.</span><span class="Identifier">tc</span> <span class="Operator">==</span> <span class="Identifier">true</span></span></tt>).</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L420" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L420" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="dnsAsyncTcpQuery-procs-all">
  <div id="dnsAsyncTcpQuery,DnsClient,Message,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#dnsAsyncTcpQuery%2CDnsClient%2CMessage%2Cint"><span class="Identifier">dnsAsyncTcpQuery</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">msg</span><span class="Other">:</span> <span class="Identifier">Message</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">500</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">Message</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">stackTrace</span><span class="Other">:</span> <span class="DecNumber">false</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span>
    <span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> of the DNS query response performed using the TCP protocol</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">msg</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> object that contains the DNS query.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server. When it is negative (less than 0), it will try to connect for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L338" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L338" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="dnsQuery-procs-all">
  <div id="dnsQuery,DnsClient,Message,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#dnsQuery%2CDnsClient%2CMessage%2Cint"><span class="Identifier">dnsQuery</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">msg</span><span class="Other">:</span> <span class="Identifier">Message</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">;</span>
              <span class="Identifier">retransmit</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Message</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span>
    <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">LibraryError</span><span class="Other">,</span> <span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">TimeoutError</span><span class="Other">,</span>
    <span class="Identifier">ResponseIpNotEqualError</span><span class="Other">,</span> <span class="Identifier">ResponsePortNotEqualError</span><span class="Other">,</span> <span class="Identifier">ResponseIdNotEqualError</span><span class="Other">,</span>
    <span class="Identifier">IsNotAnResponseError</span><span class="Other">,</span> <span class="Identifier">OpCodeNotEqualError</span><span class="Other">,</span> <span class="Identifier">UnexpectedDisconnectionError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> of the DNS query response performed using the UDP protocol</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">msg</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> object that contains the DNS query.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to receive the response from the DNS server. When it is <tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="DecNumber">1</span></span></tt>, it will try to receive the response for an unlimited time.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">retransmit</span></span></tt> when <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt>, determine the retransmission of the query to TCP protocol when the received response is truncated (<tt class="docutils literal"><span class="pre"><span class="Identifier">header</span><span class="Operator">.</span><span class="Identifier">flags</span><span class="Operator">.</span><span class="Identifier">tc</span> <span class="Operator">==</span> <span class="Identifier">true</span></span></tt>).</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L294" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L294" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="dnsTcpQuery-procs-all">
  <div id="dnsTcpQuery,DnsClient,Message,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#dnsTcpQuery%2CDnsClient%2CMessage%2Cint"><span class="Identifier">dnsTcpQuery</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">msg</span><span class="Other">:</span> <span class="Identifier">Message</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Message</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span>
    <span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">LibraryError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span>
    <span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">TimeoutError</span><span class="Other">,</span> <span class="Identifier">UnexpectedDisconnectionError</span><span class="Other">,</span>
    <span class="Identifier">ResponseIdNotEqualError</span><span class="Other">,</span> <span class="Identifier">IsNotAnResponseError</span><span class="Other">,</span> <span class="Identifier">OpCodeNotEqualError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> of the DNS query response performed using the TCP protocol.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">msg</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">Message</span></span></tt> object that contains the DNS query.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server. When it is <tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="DecNumber">1</span></span></tt>, it will try to connect for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L217" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L217" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="getIp-procs-all">
  <div id="getIp,DnsClient">
  <dt><pre><span class="Keyword">proc</span> <a href="#getIp%2CDnsClient"><span class="Identifier">getIp</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Returns the IP defined in the <tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt>.
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L180" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L180" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="getPort-procs-all">
  <div id="getPort,DnsClient">
  <dt><pre><span class="Keyword">proc</span> <a href="#getPort%2CDnsClient"><span class="Identifier">getPort</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Port</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Returns the port defined in the <tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt>.
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L184" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L184" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="initDnsClient-procs-all">
  <div id="initDnsClient,string,Port">
  <dt><pre><span class="Keyword">proc</span> <a href="#initDnsClient%2Cstring%2CPort"><span class="Identifier">initDnsClient</span></a><span class="Other">(</span><span class="Identifier">ip</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">=</span> <span class="Identifier">ndnsDnsServerIp</span><span class="Other">;</span> <span class="Identifier">port</span><span class="Other">:</span> <span class="Identifier">Port</span> <span class="Other">=</span> <span class="Identifier">Port</span><span class="Other">(</span><span class="DecNumber">53</span><span class="Other">)</span><span class="Other">)</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns a created <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt> is a DNS server IP. It can be IPv4 or IPv6. It cannot be a domain name.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">port</span></span></tt> is a DNS server listening port.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L137" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L137" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="initSystemDnsClient-procs-all">
  <div id="initSystemDnsClient">
  <dt><pre><span class="Keyword">proc</span> <a href="#initSystemDnsClient"><span class="Identifier">initSystemDnsClient</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">CatchableError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
                                        <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object, in which the dns server IP is the first one used by the system. If it is not possible to determine a dns server IP by the system, it will be initialized with <tt class="docutils literal"><span class="pre"><span class="Identifier">ndnsDnsServerIp</span></span></tt>.</p>
<p>Currently implemented for:</p>
<ul class="simple"><li><a class="reference external" href="ndns/platforms/winapi.html">Windows</a></li>
<li><a class="reference external" href="ndns/platforms/resolv.html">Linux</a></li>
<li><a class="reference external" href="ndns/platforms/resolv.html">BSD</a></li>
</ul>
<p>Notes:</p>
<ul class="simple"><li>It just creates a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object with the IPv4 used by the system. Does not use the system's native DNS resolution implementation unless the system provides a proxy.</li>
<li>The <tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt> field in the <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object does not change automatically if the IP used by the system changes.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L154" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L154" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="prepareDnsBL-procs-all">
  <div id="prepareDnsBL,string,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#prepareDnsBL%2Cstring%2Cstring"><span class="Identifier">prepareDnsBL</span></a><span class="Other">(</span><span class="Identifier">ip</span><span class="Other">,</span> <span class="Identifier">dnsbl</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns a domain name for DnsBL query.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt> is the IP address you want to query. It can be an IPv4 or IPv6. It cannot be a domain name.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">dnsbl</span></span></tt> is the domain name that maintains the blacklist.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L510" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L510" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="prepareRDns-procs-all">
  <div id="prepareRDns,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#prepareRDns%2Cstring"><span class="Identifier">prepareRDns</span></a><span class="Other">(</span><span class="Identifier">ip</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
                                       <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns a domain name for reverse DNS lookup.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt> is the IP address you want to query. It can be an IPv4 or IPv6. It cannot be a domain name.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L502" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L502" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="randId-procs-all">
  <div id="randId">
  <dt><pre><span class="Keyword">proc</span> <a href="#randId"><span class="Identifier">randId</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">uint16</span> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Returns a <tt class="docutils literal"><span class="pre"><span class="Identifier">uint16</span></span></tt>, randomly generated, to be used as an id.
    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L519" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L519" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="resolveDnsBL-procs-all">
  <div id="resolveDnsBL,DnsClient,string,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#resolveDnsBL%2CDnsClient%2Cstring%2Cstring%2Cint"><span class="Identifier">resolveDnsBL</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">ip</span><span class="Other">,</span> <span class="Identifier">dnsbl</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span>
    <span class="Identifier">string</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span>
                       <span class="Identifier">LibraryError</span><span class="Other">,</span> <span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">TimeoutError</span><span class="Other">,</span>
                       <span class="Identifier">ResponseIpNotEqualError</span><span class="Other">,</span> <span class="Identifier">ResponsePortNotEqualError</span><span class="Other">,</span>
                       <span class="Identifier">ResponseIdNotEqualError</span><span class="Other">,</span> <span class="Identifier">IsNotAnResponseError</span><span class="Other">,</span>
                       <span class="Identifier">OpCodeNotEqualError</span><span class="Other">,</span> <span class="Identifier">UnexpectedDisconnectionError</span><span class="Other">]</span><span class="Other">,</span>
              <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span><span class="Other">,</span>
              <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns IPv4 addresses. Usually the loopback address (127.0.0.0/24), in which the last octet of IPv4 represents something on the black list.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt> is the IPv4 or IPv6 address that you want to know if it is blacklisted.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">dnsbl</span></span></tt> is the domain name for DnsBL queries.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server or to receive the response from the DNS server. When it is <tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="DecNumber">1</span></span></tt>, it will try to connect for an unlimited time or to receive the response for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L663" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L663" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="resolveIpv4-procs-all">
  <div id="resolveIpv4,DnsClient,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#resolveIpv4%2CDnsClient%2Cstring%2Cint"><span class="Identifier">resolveIpv4</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">domain</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span>
    <span class="Identifier">string</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span>
                       <span class="Identifier">LibraryError</span><span class="Other">,</span> <span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">TimeoutError</span><span class="Other">,</span>
                       <span class="Identifier">ResponseIpNotEqualError</span><span class="Other">,</span> <span class="Identifier">ResponsePortNotEqualError</span><span class="Other">,</span>
                       <span class="Identifier">ResponseIdNotEqualError</span><span class="Other">,</span> <span class="Identifier">IsNotAnResponseError</span><span class="Other">,</span>
                       <span class="Identifier">OpCodeNotEqualError</span><span class="Other">,</span> <span class="Identifier">UnexpectedDisconnectionError</span><span class="Other">]</span><span class="Other">,</span>
              <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span><span class="Other">,</span>
              <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns all IPv4 addresses, in a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt>, that have been resolved from <tt class="docutils literal"><span class="pre"><span class="Identifier">domain</span></span></tt>. The <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt> can be empty.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">domain</span></span></tt> is the domain name that you wish to obtain IPv4 addresses.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server or to receive the response from the DNS server. When it is <tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="DecNumber">1</span></span></tt>, it will try to connect for an unlimited time or to receive the response for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L571" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L571" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="resolveIpv6-procs-all">
  <div id="resolveIpv6,DnsClient,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#resolveIpv6%2CDnsClient%2Cstring%2Cint"><span class="Identifier">resolveIpv6</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">domain</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span>
    <span class="Identifier">string</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span>
                       <span class="Identifier">LibraryError</span><span class="Other">,</span> <span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">TimeoutError</span><span class="Other">,</span>
                       <span class="Identifier">ResponseIpNotEqualError</span><span class="Other">,</span> <span class="Identifier">ResponsePortNotEqualError</span><span class="Other">,</span>
                       <span class="Identifier">ResponseIdNotEqualError</span><span class="Other">,</span> <span class="Identifier">IsNotAnResponseError</span><span class="Other">,</span>
                       <span class="Identifier">OpCodeNotEqualError</span><span class="Other">,</span> <span class="Identifier">UnexpectedDisconnectionError</span><span class="Other">]</span><span class="Other">,</span>
              <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span><span class="Other">,</span>
              <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns all IPv6 addresses, in a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt>, that have been resolved from <tt class="docutils literal"><span class="pre"><span class="Identifier">domain</span></span></tt>. The <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt> can be empty.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">domain</span></span></tt> is the domain name that you wish to obtain IPv6 addresses.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server or to receive the response from the DNS server. When it is <tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="DecNumber">1</span></span></tt>, it will try to connect for an unlimited time or to receive the response for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L601" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L601" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="resolveRDns-procs-all">
  <div id="resolveRDns,DnsClient,string,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#resolveRDns%2CDnsClient%2Cstring%2Cint"><span class="Identifier">resolveRDns</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="ndns.html#DnsClient"><span class="Identifier">DnsClient</span></a><span class="Other">;</span> <span class="Identifier">ip</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">-1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span>
    <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">LibraryError</span><span class="Other">,</span> <span class="Identifier">SslError</span><span class="Other">,</span>
    <span class="Identifier">TimeoutError</span><span class="Other">,</span> <span class="Identifier">ResponseIpNotEqualError</span><span class="Other">,</span> <span class="Identifier">ResponsePortNotEqualError</span><span class="Other">,</span>
    <span class="Identifier">ResponseIdNotEqualError</span><span class="Other">,</span> <span class="Identifier">IsNotAnResponseError</span><span class="Other">,</span> <span class="Identifier">OpCodeNotEqualError</span><span class="Other">,</span>
    <span class="Identifier">UnexpectedDisconnectionError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <p>Returns all domain names, in a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt>, which is obtained by the &quot;reverse&quot; query of <tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt>. The <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></span></tt> can be empty.</p>
<p><strong>Parameters</strong></p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">client</span></span></tt> is a <tt class="docutils literal"><span class="pre"><span class="Identifier">DnsClient</span></span></tt> object that contains the IP and Port of the DNS server.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">ip</span></span></tt> is the IPv4 or IPv6 address that is intended to obtain the domain name, which represents the reverse address.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> is the maximum waiting time, in milliseconds, to connect to the DNS server or to receive the response from the DNS server. When it is <tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="DecNumber">1</span></span></tt>, it will try to connect for an unlimited time or to receive the response for an unlimited time.</li>
</ul>

    <a href="https://github.com/rockcavera/nim-ndns/tree/main/src/ndns.nim#L631" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/rockcavera/nim-ndns/edit/main/src/ndns.nim#L631" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2023-01-03 02:07:50 UTC</small>
      </div>
    </div>
  </div>
  
  <!-- Google fonts -->
  <link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>
</body>
</html>
